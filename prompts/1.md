# Prompt 1: Decompose UserScreen.tsx

**Priority:** P0 (Critical)
**Focus:** UI Component Architecture
**Skill Required:** Load `code-structure` skill before starting

---

## Pre-Flight Checklist

1. **Read issues first:** Check `docs/issues/ui/README.md` for any prior learnings
2. **Verify the problem:**
   ```bash
   wc -l mobile/components/UserScreen.tsx
   ```
   Should show ~617 lines (OVER 300 limit)

---

## Context

The `UserScreen.tsx` file at 617 lines violates our 300-line file limit. This blocks AI tools from reading/editing the file effectively. The file must be decomposed into smaller, focused components.

---

## Requirements

### 1. Analyze Current Structure

Read `mobile/components/UserScreen.tsx` and identify:
- What UI sections exist
- What hooks/state are used
- What can be extracted to separate components

### 2. Create Component Structure

Create these new files under `mobile/components/profile/`:

```
mobile/components/profile/
├── UserHeader.tsx        # Avatar, username, wallet address (< 100 lines)
├── WalletCard.tsx        # Balance display, deposit/withdraw (< 150 lines)
├── StatsOverview.tsx     # Win rate, total bets, volume (< 100 lines)
├── ActivityFeed.tsx      # Recent bets/wins (< 150 lines)
├── ReferralCard.tsx      # Referral code, earnings (< 100 lines)
└── index.ts              # Barrel export
```

### 3. Refactor UserScreen.tsx

After extraction, `UserScreen.tsx` should:
- Import and compose the new components
- Be < 150 lines (orchestration only)
- Pass data/callbacks to children
- Handle only top-level loading/error states

### 4. Extract Hooks if Needed

If `UserScreen.tsx` has inline state/effects, extract to:
- `hooks/useUserProfile.ts` (< 150 lines)

---

## Implementation Steps

1. **Read the full file first** - Understand all functionality
2. **Identify extraction boundaries** - Look for self-contained UI sections
3. **Create new component files** - Start with simplest components
4. **Move JSX to new components** - Copy, then verify imports
5. **Wire up props** - Pass necessary data/callbacks
6. **Update UserScreen.tsx** - Import and use new components
7. **Verify line counts** - All files must be < 300 lines
8. **Test the UI** - Ensure nothing broke

---

## Verification

```bash
# All new files under limit
wc -l mobile/components/profile/*.tsx

# UserScreen.tsx now under limit
wc -l mobile/components/UserScreen.tsx
# Expected: < 150 lines

# Check for TypeScript errors
cd mobile && npx tsc --noEmit
```

Manual verification:
- [ ] Profile screen renders correctly
- [ ] All stats display
- [ ] Wallet balance shows
- [ ] Referral code displays
- [ ] No console errors

---

## Do NOT

- Change functionality - this is a pure refactor
- Add new features
- Modify the visual design
- Skip TypeScript types
- Create files over 300 lines

---

## Deliverables

1. New component files in `mobile/components/profile/`
2. Refactored `UserScreen.tsx` < 150 lines
3. Optional: New hooks if state extraction needed
4. All TypeScript compiling

---

## Post-Completion

1. Document any issues encountered in `docs/issues/ui/README.md`
2. Delete this prompt file: `rm prompts/1.md`
3. Report: "completed prompt 1"
