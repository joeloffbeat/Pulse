# Prompt 8: Deployment Verification

**Priority:** P0 (Final)
**Focus:** DevOps / Production Readiness
**Skill Required:** Load `move-dev` skill for contract verification

---

## Pre-Flight Checklist

1. **Ensure all previous prompts complete:**
   - [ ] Prompt 1: UserScreen.tsx decomposed
   - [ ] Prompt 2: Deep links working
   - [ ] Prompt 3: Pyth worker (optional)
   - [ ] Prompt 4: Bonus system
   - [ ] Prompt 5: Error handling
   - [ ] Prompt 6: E2E testing passed
   - [ ] Prompt 7: Polish (optional)

2. **Read all issues:** Check every `docs/issues/*/README.md` file

---

## Context

Final verification that everything is production-ready:
- Contracts deployed and verified
- Backend running and accessible
- Mobile app builds successfully
- All integrations working

---

## Requirements

### 1. Contract Verification

```bash
# Verify contracts are deployed
cd contracts

# Check deployment address
cat Move.toml | grep "Pulse"

# Verify all modules exist on-chain
movement move view --function-id 'Pulse::market::get_market_count'

# Check treasury is funded
movement move view --function-id 'Pulse::treasury::get_balance'
```

Document in `docs/deployment.md`:
```markdown
# Deployment Info

## Contracts
- **Network:** Movement Testnet
- **Module Address:** 0x...
- **Deployed Modules:**
  - market.move âœ…
  - position.move âœ…
  - treasury.move âœ…
  - oracle.move âœ…
  - referral.move âœ…
  - market_views.move âœ…

## Explorer Links
- Module: https://explorer.movementnetwork.xyz/account/0x...
```

### 2. Backend Verification

```bash
# Check backend is running
curl http://localhost:3000/health

# Verify API endpoints
curl http://localhost:3000/markets
curl http://localhost:3000/leaderboard
curl http://localhost:3000/stats/0x...

# Test transaction endpoint
curl -X POST http://localhost:3000/generate-hash \
  -H "Content-Type: application/json" \
  -d '{"market_id": 1, "is_yes": true, "amount": 100000}'
```

### 3. Mobile Build Verification

```bash
cd mobile

# Install dependencies
npm install

# Type check
npx tsc --noEmit

# Lint check
npm run lint

# Build for development
npx expo start --clear

# Build preview (EAS)
eas build --platform ios --profile preview
eas build --platform android --profile preview
```

### 4. Environment Variables Check

Verify all required env vars are set:

**Mobile (.env / app.json):**
- `EXPO_PUBLIC_PRIVY_APP_ID` âœ…
- `EXPO_PUBLIC_PRIVY_CLIENT_ID` âœ…
- `EXPO_PUBLIC_API_URL` âœ…
- `EXPO_PUBLIC_MODULE_ADDRESS` âœ…

**Backend (.env):**
- `PRIVATE_KEY` (for signing) âœ…
- `MODULE_ADDRESS` âœ…
- `MOVEMENT_RPC_URL` âœ…
- `PORT` âœ…

### 5. Create Initial Markets

```bash
# Create at least 3 markets for launch
./scripts/create-btc-market.sh --hours 24
./scripts/create-eth-market.sh --hours 24
./scripts/create-custom-market.sh \
  --question "Will it snow in NYC on New Year's?" \
  --hours 48

# Verify markets created
./scripts/list-markets.sh
```

### 6. Smoke Test Checklist

Final run-through of critical paths:

| Flow | Status |
|------|--------|
| New user signup (Privy) | â¬œ |
| Complete onboarding | â¬œ |
| Receive $1 bonus | â¬œ |
| View markets | â¬œ |
| Place YES bet | â¬œ |
| Place NO bet | â¬œ |
| View My Bets | â¬œ |
| Claim winnings | â¬œ |
| View leaderboard | â¬œ |
| Share referral | â¬œ |
| Deep link to market | â¬œ |
| Logout and re-login | â¬œ |

### 7. Documentation Update

Update `README.md` with:
- Quick start instructions
- Environment setup
- API documentation
- Deployment steps
- Troubleshooting guide

### 8. Final File Size Audit

```bash
# Check all files under 300 lines
find mobile -name "*.tsx" -o -name "*.ts" | xargs wc -l | sort -n | tail -20
find contracts/sources -name "*.move" | xargs wc -l | sort -n
```

All files must be < 300 lines.

---

## Implementation Steps

1. **Verify contracts** - All modules on-chain
2. **Verify backend** - All endpoints responding
3. **Build mobile** - No errors
4. **Check env vars** - All set
5. **Create markets** - At least 3 active
6. **Smoke test** - Full flow works
7. **Update docs** - README complete
8. **File audit** - All under limit

---

## Verification

Final checklist must show all âœ…:

```
âœ… Contracts deployed and verified
âœ… Backend running and healthy
âœ… Mobile builds without errors
âœ… Environment variables configured
âœ… 3+ active markets created
âœ… Smoke test passed
âœ… README updated
âœ… All files < 300 lines
```

---

## Deliverables

1. `docs/deployment.md` with deployment info
2. Updated `README.md` with complete instructions
3. 3+ active markets on testnet
4. Passing smoke test
5. Clean file size audit

---

## Post-Completion

1. Archive any remaining issues to `docs/issues/`
2. Update `prompts/README.md` with completion status
3. Delete this prompt file: `rm prompts/8.md`
4. Report: "MVP COMPLETE - Ready for launch!"

---

## Congratulations!

If you've completed all 8 prompts, the Pulse MVP is ready for:
- Demo presentation
- Alpha testing
- Movement hackathon submission

ðŸŽ‰ Well done!
